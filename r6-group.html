<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R6分队工具</title>
</head>

<script>
    var checkboxs = document.getElementsByName("member");

    function all_select() {
        for (var i = 0; i < checkboxs.length; i++) {
            checkboxs[i].checked = true;
        }
    }

    function reverse_select() {
        for (var i = 0; i < checkboxs.length; i++) {
            checkboxs[i].checked = !checkboxs[i].checked;
        }
    }

    function rollTeam() {
        var members_all = document.getElementsByName("member");
        var members_selected = new Array();
        var num_selected = 0;
        var random_array = new Array();
        var sort_index = new Array();
        for (var i = 0; i < members_all.length; i++) {
            if (members_all[i].checked) {
                members_selected[num_selected] = members_all[i].value;
                num_selected++;
            }
        }
        if (num_selected < 6)
            return "人数少于六人";
        else {
            for (var i = 0; i < num_selected; i++) {
                random_array[i] = Math.random();
            }
            for (var i = 0; i < num_selected; i++) {
                var idx = random_array.indexOf(Math.max.apply(0, random_array));
                sort_index[i] = idx;
                random_array[idx] = -1;
            }
            var roll_reasult = new String("<center><h3>Team A</h3>");
            for (var i = 0; i < num_selected; i++) {
                roll_reasult += "<p>" + members_selected[sort_index[i]] + "</p>";
                if (i == Math.floor((num_selected - 1) / 2)) {
                    roll_reasult += "<h3>Team B</h3>";
                }
            }
            roll_reasult += "</center>";
            return roll_reasult;
        }
    }

    function reset_web() {
        document.getElementById("check_form").reset();
        return "";
    }
</script>

<body>
    <center>
        <h1>⑥分队</h1>
        <h3>请选中至少⑥人</h3>
        <form id="check_form" action="" method="get">
            <fieldset><br>
                <input type="checkbox" name="member" value="子夜">子夜&emsp;
                <input type="checkbox" name="member" value="夜鸫">夜鸫<br>
                <input type="checkbox" name="member" value="落子">落子&emsp;
                <input type="checkbox" name="member" value="咕科">咕科<br>
                <input type="checkbox" name="member" value="旧景">旧景&emsp;
                <input type="checkbox" name="member" value="守护">守护<br>
                <input type="checkbox" name="member" value="不笙">不笙&emsp;
                <input type="checkbox" name="member" value="稚羽">稚羽<br><br>
                <input type="hidden" name="results" id="results" value="">
                <button type="button" onclick="all_select()">全选</button>
                <button type="reset">全不选</button>
                <button type="button" onclick="reverse_select()">反选</button>
            </fieldset><br>
        </form>
        <button onclick="getElementById('result').innerHTML=rollTeam()"
            style="height: 32px; width: 80px; font-size: 20px;">
            分队
        </button>&emsp;
        <button onclick="getElementById('result').innerHTML=reset_web()"
            style="height: 32px; width: 80px; font-size: 20px;">
            重置
        </button>
        <p id='result'></p>
    </center>
</body>

</html>